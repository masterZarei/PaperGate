(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9603],{35243:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return i(78038)}])},57371:function(e,t,i){"use strict";var n=i(85893),l=i(67294),s=i(97163),a=i(67799),o=i(20343),r=i.n(o);t.Z=e=>{let{checked:t,setChecked:i,isDisable:o}=e,c=(0,l.useContext)(s.Ni);return(0,n.jsxs)("label",{className:"".concat(r().toggleButton," ").concat(o?t?r().disableChecked:r().disableUnchecked:""," ").concat(c===a.Q2.dark?r().dark:""),onClick:e=>{e.stopPropagation()},children:[(0,n.jsx)("input",{type:"checkbox",checked:t,onChange:()=>{i(!t)},disabled:o}),(0,n.jsx)("span",{className:r().slider})]})}},94174:function(e,t,i){"use strict";i.r(t);var n=i(85893),l=i(41664),s=i.n(l),a=i(9008),o=i.n(a);let r={padding:"10px 20px",color:"white",backgroundColor:"#00a2a4",borderRadius:"40px",marginTop:"10px",display:"inline-block"};t.default=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(),{children:(0,n.jsx)("title",{children:"صفحه‌ای با این آدرس در طاقچه پیدا نشد"})}),(0,n.jsxs)("div",{className:"container",style:{textAlign:"center",padding:"150px 40px"},children:[(0,n.jsx)("img",{src:"/images/book.png",width:200,alt:"404"}),(0,n.jsx)("p",{children:"صفحه مورد نظر پیدا نشد"}),(0,n.jsx)(s(),{href:"/",style:r,children:"بازگشت به صفحه نخست"})]})]})}},78038:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return er},default:function(){return ec}});var n=i(85893),l=i(94174),s=i(67294),a=i(11163),o=i(27735),r=i.n(o),c=e=>{let{text:t,onClose:i,hover:l=!1}=e;return(0,n.jsxs)("div",{className:"".concat(r().chips," ").concat(l?r().hover:""),children:[(0,n.jsx)("span",{className:r().text,dangerouslySetInnerHTML:{__html:t}}),i&&(0,n.jsx)("img",{className:r().close,onClick:()=>i(),src:"/icons/ic-cancel.svg",alt:"close"})]})},d=i(6998),u=e=>{let{tabs:t,selectedTab:i,color:l="rgb(0, 162, 164)"}=e,{windowWidth:a}=(0,d.Z)(),o=(0,s.useMemo)(()=>{let e=0;return t.forEach((t,n)=>{t.id===i&&(e=n)}),e},[i]);return(0,n.jsx)("div",{style:{position:"absolute",bottom:"0",width:a<576?"".concat((a-21)/t.length,"px"):a<768?"".concat(540/t.length,"px"):"100px",height:"2px",backgroundColor:l,marginRight:a<576?"".concat((a-11)/t.length*o,"px"):a<768?"".concat(540/t.length*o,"px"):"".concat(100*o,"px"),transition:"0.2s",marginTop:"-2px"}})},h=i(10096),v=i.n(h);let p=e=>{var t;let{tabsLength:i,thisTab:l,onClick:s,selectedTab:a}=e,{windowWidth:o}=(0,d.Z)();return(0,n.jsx)("div",{style:{width:o<576?"".concat(o/i,"px"):o<768?"".concat(540/i,"px"):"100px",color:l.id===a?null!==(t=l.color)&&void 0!==t?t:"#00a2a4":""},className:"".concat(v().tab," ").concat(l.id===a?v().selected:""),onClick:()=>s(l.id),children:l.name},l.name)};var m=e=>{var t;let{tabsList:i,selectedTab:l,children:s,className:a}=e;return(0,n.jsxs)("div",{className:"container ".concat(v().tabs," ").concat(null!=a?a:""),children:[s,(0,n.jsx)(u,{tabs:i,selectedTab:l,color:null===(t=i.find(e=>e.id===l))||void 0===t?void 0:t.color})]})},_=i(49706),x=i(92331),f=i(35305),g=i(85786),k=i(67799),b=i(43077),j=i(65385),y=i.n(j),C=i(26088),N=i.n(C),O=i(68547),S=i(87447),w=i(4896),P=i(46582),M=i(32071),q=i(48031),E=i(93989),L=i(91313),I=i.n(L),B=e=>{let{chipsClicked:t,iconClicked:i,hover:l=!1,className:s,iconClass:a,children:o,active:r}=e;return(0,n.jsxs)("div",{onClick:t,className:"".concat(s||""," ").concat(I().chips," ").concat(l?I().hover:""," ").concat(r?I().active:""),children:[(0,n.jsx)("div",{className:"".concat(I().text," ").concat(a?I().leftMargin:""),children:o}),a&&(0,n.jsx)("span",{className:a,onClick:i})]})},T=i(41664),V=i.n(T),R=i(26730),H=i(57261),Z=e=>{let{bookList:t,hasMore:i,nextOffset:l,isMobile:o,mobileChips:r}=e,[c,u]=(0,s.useState)(t),[h,v]=(0,s.useState)(i),[p,m]=(0,s.useState)(l),[x,f]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),y=(0,s.useContext)(w.uL),C=(0,a.useRouter)(),{user:L}=(0,s.useContext)(_.V),{windowWidth:I}=(0,d.Z)();(0,s.useEffect)(()=>v(i),[t,i]);let T=(0,s.useCallback)(()=>{if(h){j(!0);let e=(0,g.jQ)({pathname:"",query:C.query},[]),t=encodeURI("".concat(S.Z.webApi.getServer,"/v3/search").concat(e,"&offset=").concat(p,"&trackingData=").concat(P.l.trackingData)),i=null===E.n2||void 0===E.n2?void 0:E.n2.userSession;fetch(t,{method:"GET",headers:{session:i,"X-Platform":o?"mobile":"desktop"}}).then(e=>e.json()).then(e=>{j(!1),u(t=>[...t,...e.tabItems.items]),v(e.tabItems.hasMore),m(e.tabItems.nextOffset)}).catch(e=>{j(!1),y({type:"push",value:{type:w.pC.Error,msg:e.message}})})}},[C,h,p,y]);(0,s.useEffect)(()=>{"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype||f(!0)},[]),(0,s.useEffect)(()=>{u(t)},[t]);let Z=(0,s.useCallback)(e=>{(0,H.z)(null==e?void 0:e.eventName,null==L?void 0:L.id),e.refId&&(0,q.ik)(e.refId)},[L]),F=(0,s.useMemo)(()=>{var e,t;if(o&&(null==r?void 0:null===(e=r.chips)||void 0===e?void 0:e.length))return(0,n.jsxs)("div",{className:N().chipsList,children:[(0,n.jsx)("div",{children:null==r?void 0:r.relatedSearchTitle}),(0,n.jsx)("div",{className:N().chipsRow,children:null==r?void 0:null===(t=r.chips)||void 0===t?void 0:t.map(e=>{let t=(0,R.Vg)({list:[{type:k.vA[e.type],value:e.id}]});return(0,n.jsx)(V(),{href:t,passHref:!0,onClick:()=>Z(e),children:(0,n.jsx)(B,{className:N().chip,children:(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:null==e?void 0:e.name}})})},null==e?void 0:e.id)})})]})},[o,r]),D=(0,s.useMemo)(()=>I<576?2:I<768?3:I<1200?4:5,[I]);return(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:N().bookList,children:c&&c.map((e,t)=>(0,n.jsxs)(s.Fragment,{children:[t===D&&F,(0,n.jsx)("div",{onClick:()=>(0,q.ik)(e.refId),children:(0,n.jsx)(M.default,{isGiantCard:!0,book:e})},t)]},t))}),x&&(0,n.jsxs)("p",{className:N().warning,children:["مرورگر شما به صورت کامل از امکانات طاقچه پشتیبانی نمیکند. لطفاً از نسخه جدید مرورگر Chrome یا FireFox استفاده کنید. برای راهنمایی بیشتر لطفا با پشیبانی طاقچه به شماره",(0,n.jsx)("a",{className:N().tel,href:"tel:+982191071001",children:"+۹۸ ۲۱ ۹۱۰ ۷۱۰ ۰۱"}),"تماس بگیرید."]}),h&&(b?(0,n.jsx)("div",{className:N().bounce,children:(0,n.jsx)(O.Z,{})}):(0,n.jsx)("div",{className:N().getMoreOldContainer,children:h&&(0,n.jsx)("div",{className:N().getMoreOld,onClick:T,children:(0,n.jsx)("span",{className:N().title,children:"مشاهده کتاب‌های بیشتر"})})}))]})},F=i(36227),D=i.n(F),z=e=>{let{initChipsPackage:t,pageSetting:i,isMobile:l}=e,[a,o]=(0,s.useState)(t.results),[r,d]=(0,s.useState)(t.nextOffset),[u,h]=(0,s.useState)(t.showMore),{user:v}=(0,s.useContext)(_.V),p=()=>{let e=encodeURI("".concat(S.Z.webApi.getServer,"/v3/search/nonBooks?term=").concat(i.term,"&searchOn=").concat(i.searchOn,"&trackingData=11016024&offset=").concat(r).concat(l?"&mobileSize=true":"")),t=null===E.n2||void 0===E.n2?void 0:E.n2.userSession;fetch(e,{method:"GET",headers:{session:t,"X-Platform":l?"mobile":"desktop"}}).then(e=>e.json()).then(e=>{h(e.data[0].showMore),d(e.data[0].nextOffset),o([...a,...e.data[0].results])})},m=(e,t)=>{(0,H.z)(e,null==v?void 0:v.id),t.refId&&(0,q.ik)(t.refId)};return(0,s.useEffect)(()=>{o(t.results),h(t.showMore),d(t.nextOffset)},[i.term,i.searchOn]),(0,n.jsx)("div",{className:"container ".concat(D().chipsPackages),children:(0,n.jsx)("div",{className:D().chipsPackage,children:(0,n.jsxs)("div",{className:D().childOfHideMore,children:[a.map(e=>{let i=(0,R.Vg)({list:[{type:k.vA[t.type],value:e.id}]});return(0,n.jsx)(V(),{href:i,passHref:!0,onClick:()=>m(t.events.clickEventName,e),children:(0,n.jsx)(c,{text:e.name,hover:!0},e.id)},e.id)}),u&&(0,n.jsx)("div",{className:D().more,children:(0,n.jsx)("span",{className:"link-with-arrow",onClick:()=>p(),children:"بیشتر"})})]})})})};let Q=(0,s.createContext)({queryId:void 0,setQueryId:function(e){}});var A=e=>{let{children:t}=e,[i,l]=(0,s.useState)(void 0);return(0,n.jsx)(Q.Provider,{value:{queryId:i,setQueryId:l},children:t})},G=i(77006),X=i.n(G),U=e=>{let{chipsPackages:t,pageSetting:i}=e,{user:l}=(0,s.useContext)(_.V),{windowWidth:a}=(0,d.Z)(),o=(e,t)=>{(0,H.z)(e.events.clickEventName,null==l?void 0:l.id),t.refId&&(0,q.ik)(t.refId)};return(0,n.jsx)("div",{className:"container ".concat(X().chipsPackages),children:t.map(e=>(0,n.jsxs)("div",{className:X().chipsPachage,children:[(0,n.jsx)("div",{className:X().hideMoreItem,children:(0,n.jsxs)("div",{className:X().childOfHideMore,children:[(0,n.jsx)(V(),{passHref:!0,href:"/search?term=".concat(i.term,"&searchOn=").concat(e.searchOnKey),onClick:()=>(0,H.z)(e.events.eventName,null==l?void 0:l.id),children:(0,n.jsx)("span",{className:"".concat(X().chipsPackageTitle," link-with-arrow"),children:a>768?50>e.name.indexOf("\xbb")?e.name:e.name.substring(0,45)+" ... \xbb"+e.name.substring(e.name.indexOf("\xbb")+1):e.name.substring(e.name.indexOf("\xbb")+1)})}),e.results.map(t=>{let l=(0,R.Vg)({list:[{type:k.vA[e.type],value:t.id}]});return 0===t.id&&(l="/search?term=".concat(i.term,"&searchOn=content")),(0,n.jsx)(V(),{href:l,passHref:!0,onClick:()=>o(e,t),children:(0,n.jsx)(c,{text:t.name,hover:!0},t.id)},t.id)})]})}),e.showMore&&(0,n.jsx)(V(),{passHref:!0,href:"/search?term=".concat(i.term,"&searchOn=").concat(e.searchOnKey),onClick:()=>(0,H.z)(e.events.showMoreEventName,null==l?void 0:l.id),children:(0,n.jsx)("div",{className:"".concat(X().more," link-with-arrow"),children:"بیشتر"})})]},e.name))})},J=i(48739),K=i(80899),W=i(72900),Y=i.n(W),$=i(57371);let ee=e=>{let{children:t,setModal:i}=e,l=(0,s.useRef)();return(0,f.Z)(l,()=>i({}),[]),(0,n.jsx)(K.Z,{isOpen:!0,isfull:!1,closeModal:void 0,children:(0,n.jsx)("div",{ref:l,className:Y().box,onClick:e=>e.stopPropagation(),children:t})})},et=(e,t)=>{var i,n,l,s;return(null===(i=Object.keys(e))||void 0===i?void 0:i.length)===0&&(null===(n=Object.keys(t))||void 0===n?void 0:n.length)===0||(null===(l=Object.keys(e))||void 0===l?void 0:l.every(i=>{var n,l;return(null===(n=e[i])||void 0===n?void 0:n.toString())===(null===(l=t[i])||void 0===l?void 0:l.toString())}))&&(null===(s=Object.keys(t))||void 0===s?void 0:s.every(i=>{var n,l;return(null===(n=e[i])||void 0===n?void 0:n.toString())===(null===(l=t[i])||void 0===l?void 0:l.toString())}))},ei={radio:e=>{let{options:t,onClickEvent:i,current:l,setModal:s,title:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:null===Y()||void 0===Y()?void 0:Y().title,children:a}),null==t?void 0:t.map(e=>(0,n.jsxs)("label",{className:Y().radioButton,children:[(0,n.jsx)("input",{type:"radio",id:e.name,checked:(null==e?void 0:e.id.toString())===l,onChange:()=>{i(e),s({type:""})}}),e.name]},null==e?void 0:e.name))]})},filterButton:e=>{var t,i,l;let{searchPageConfig:o,changeQuery:r,setModal:c,isMobile:d,setLoading:u}=e,h=(0,a.useRouter)(),[v,p]=(0,s.useState)({...null==h?void 0:h.query}),{filterOptions:m,tabOptions:_,sortOptions:x}=o,[f,b]=(0,s.useState)(m),j=(0,s.useMemo)(()=>Object.keys(v).filter(e=>"term"!==e&&"searchOn"!==e).length,[v]),y=(0,s.useCallback)(()=>{if(j){var e;p({term:null==h?void 0:null===(e=h.query)||void 0===e?void 0:e.term}),w(_[0])}},[h,j]),C=(0,s.useCallback)((e,t)=>p(i=>r(e,t,i)),[r]);(0,s.useEffect)(()=>{p(null==h?void 0:h.query)},[h]);let N=(0,s.useMemo)(()=>!et(null==h?void 0:h.query,v),[h,v]),O=(0,s.useCallback)(()=>{N&&h.push({pathname:h.asPath.split("?")[0],query:v}),c({type:""}),u(!0)},[v,N]),w=(0,s.useCallback)(e=>{C(e,"tab");let t=encodeURI("".concat(S.Z.webApi.getServer,"/v3/search/filters?tab=").concat(null==e?void 0:e.id,"&justFilter=true&trackingData=").concat(P.l.trackingData)),i=null===E.n2||void 0===E.n2?void 0:E.n2.userSession;fetch(t,{method:"GET",headers:{session:i,"X-Platform":d?"mobile":"desktop"}}).then(e=>e.json()).then(e=>{let t=null==e?void 0:e.tabFilters.map(e=>{var t;return{...e,options:null==e?void 0:null===(t=e.filterEvents[0])||void 0===t?void 0:t.eventName}});p(e=>{var i,n;let l={...e};return null===(n=Object)||void 0===n||null===(i=n.keys(l))||void 0===i||i.forEach(e=>!(null==el?void 0:el.includes(e))&&(null==t?void 0:t.findIndex(t=>(null==t?void 0:t.keyValue)===e))===-1&&delete l[e]),l}),b(t)}).catch(()=>{})},[v,C]);return(0,n.jsxs)("div",{className:null===Y()||void 0===Y()?void 0:Y().filterButtonWrapper,children:[(0,n.jsxs)("div",{className:"".concat(Y().filter," ").concat(Y().row),children:[(0,n.jsx)("div",{className:Y().title,children:"فیلتر"}),(0,n.jsx)("div",{className:"".concat(Y().remove," ").concat(j?"":Y().disable),onClick:y,children:"حذف فیلترها"})]}),null==f?void 0:null===(t=f.filter(e=>(null==e?void 0:e.type)===k.V8.CheckboxButton))||void 0===t?void 0:t.map(e=>(0,n.jsxs)("div",{className:Y().row,children:[(0,n.jsx)("div",{children:null==e?void 0:e.name}),(0,n.jsx)($.Z,{checked:!!v[null==e?void 0:e.keyValue],isDisable:!1,setChecked:()=>{C(null==e?void 0:e.options,null==e?void 0:e.keyValue)}})]},null==e?void 0:e.keyValue)),(0,n.jsx)("div",{className:Y().title,children:"نوع کتاب"}),(0,n.jsx)("div",{className:null===Y()||void 0===Y()?void 0:Y().rowChips,children:null==_?void 0:_.map(e=>{var t,i,l;let s=(null!==(l=null==v?void 0:null===(t=v.tab)||void 0===t?void 0:t.toString())&&void 0!==l?l:"0")===(null==e?void 0:null===(i=e.id)||void 0===i?void 0:i.toString());return(0,n.jsx)(B,{chipsClicked:()=>w(e),active:s,children:null==e?void 0:e.name},null==e?void 0:e.id)})}),(0,n.jsx)("div",{className:Y().line}),(0,n.jsx)("div",{className:Y().title,children:"ترتیب نمایش"}),(0,n.jsx)("div",{className:Y().rowChips,children:null===(l=x[0])||void 0===l?void 0:null===(i=l.options)||void 0===i?void 0:i.map(e=>{var t,i,l;let s=(null!==(l=null==v?void 0:null===(t=v.sort)||void 0===t?void 0:t.toString())&&void 0!==l?l:"0")===(null==e?void 0:null===(i=e.id)||void 0===i?void 0:i.toString());return(0,n.jsx)(B,{chipsClicked:()=>C(e,"sort"),active:s,children:null==e?void 0:e.name},null==e?void 0:e.id)})}),(0,n.jsx)("div",{className:Y().line,style:{height:"2px"}}),(0,n.jsxs)("div",{className:Y().results,children:[(0,n.jsxs)("div",{children:[(0,g.Iq)(j)," فیلتر اعمال شده"]}),(0,n.jsx)("div",{className:Y().horizontalLine}),(0,n.jsx)(B,{chipsClicked:O,className:Y().resultsChips,active:!0,children:"مشاهده نتیجه"})]})]})}};var en=e=>{let{type:t,setModal:i,setLoading:l,...s}=e,a=ei[t];return a?(0,n.jsx)(ee,{setModal:i,children:(0,n.jsx)(a,{...s,setModal:i,setLoading:l})}):(0,n.jsx)(n.Fragment,{})};let el=["term","tab","sort","searchOn"];var es=e=>{var t,i,l;let{searchPageConfig:o,searchPageChips:r,isMobile:u}=e,h=(0,a.useRouter)(),v=(0,s.useContext)(x.kQ),{user:j}=(0,s.useContext)(_.V),{setQueryId:C}=(0,s.useContext)(Q),N=(0,s.useRef)(null),S=(0,s.useRef)(null),w=(0,s.useRef)(null),{windowWidth:P}=(0,d.Z)(),[M,q]=(0,s.useState)(!1),[E,L]=(0,s.useState)(!1),[I,T]=(0,s.useState)(!0),[V,R]=(0,s.useState)(0),F=()=>{let e=h.asPath.split("&");return(e=(e=(e=e.filter(e=>!e.includes("term"))).filter(e=>!e.includes("tab"))).filter(e=>!e.includes("sort"))).filter(e=>!e.includes("searchOn"))},[D,A]=(0,s.useState)({term:h.query.term,tab:+h.query.tab||0,sort:+h.query.sort||0,filters:F()||[],searchOn:h.query.searchOn}),[G,X]=(0,s.useState)({type:""}),K=(0,s.useRef)(),W=(0,s.useContext)(x.qd);(0,f.Z)(N,()=>P>576&&q(!1),[P]),(0,f.Z)(S,()=>P>576&&L(!1),[P]);let Y=e=>{A(t=>(delete h.query[e],h.push({pathname:h.asPath.split("?")[0],query:{...h.query}}),{...t,filters:t.filters.filter(t=>t.includes(e))})),T(!0)};(0,s.useEffect)(()=>{let e=()=>{R(window.pageYOffset)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,s.useEffect)(()=>(window.scrollTo(0,0),W({showHeader:!0,showMenu:!0,showShadow:!1}),()=>{W({showHeader:!0,showMenu:!0,showShadow:!0})}),[]),(0,s.useEffect)(()=>{C(o.tabItems.queryId),A({term:h.query.term,tab:+h.query.tab||0,sort:+h.query.sort||0,filters:F(),searchOn:h.query.searchOn}),T(!1)},[h.query]),(0,s.useEffect)(()=>{if(u){let e={...h.query};Object.keys(e).forEach(t=>{var i;return!el.includes(t)&&(null==o?void 0:null===(i=o.filterOptions)||void 0===i?void 0:i.findIndex(e=>(null==e?void 0:e.keyValue)===t))===-1&&delete e[t]}),Object.keys(e).length!==Object.keys(h.query).length&&h.push({pathname:h.asPath.split("?")[0],query:e},void 0,{shallow:!0})}},[o,h]);let $=(0,s.useCallback)((e,t,i)=>{let n="string"==typeof e;(0,H.z)(n?e:null==e?void 0:e.eventName,null==j?void 0:j.id);let l={...i};return n?l[t]?delete l[t]:l[t]="true":(l[t]=null==e?void 0:e.id,((null==e?void 0:e.id)===0||(null==e?void 0:e.id)==="")&&delete l[t]),l},[j]),ee=(0,s.useCallback)((e,t)=>{let i=$(e,t,h.query);T(!0),h.push({pathname:h.asPath.split("?")[0],query:i})},[h,$]),et=(0,s.useCallback)(e=>{var t,i;let l=null===(t=h.query.tab)||void 0===t?void 0:t.toString();return(0,n.jsx)(B,{chipsClicked:t=>{t.stopPropagation(),X({type:"radio",onClickEvent:e=>ee(e,"tab"),title:"نوع کتاب",current:l||"0",options:e})},className:y().chips,iconClass:l?"icon-close":"icon-chevron_down",iconClicked:t=>{l&&(t.stopPropagation(),ee(e.find(e=>(null==e?void 0:e.id)===0),"tab"))},active:!!l,children:l?null===(i=e.find(e=>{var t;return(null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString())===l}))||void 0===i?void 0:i.name:"نوع کتاب"})},[ee,h]),ei=(0,s.useCallback)(e=>{var t,i;let l=null===(t=h.query.sort)||void 0===t?void 0:t.toString();return(0,n.jsx)(B,{chipsClicked:t=>{t.stopPropagation(),X({type:"radio",onClickEvent:t=>ee(t,null==e?void 0:e.keyValue),title:null==e?void 0:e.name,current:l||"0",options:null==e?void 0:e.options})},className:y().chips,iconClass:l?"icon-close":"icon-chevron_down",iconClicked:t=>{l&&(t.stopPropagation(),ee(null==e?void 0:e.options.find(e=>(null==e?void 0:e.id)===0),null==e?void 0:e.keyValue))},active:!!l,children:l?null==e?void 0:null===(i=e.options.find(e=>{var t;return(null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString())===l}))||void 0===i?void 0:i.name:"ترتیب نمایش"})},[ee,h]),es=(0,s.useCallback)(e=>{var t;return null!==(t=e.map(e=>{var t,i;let n=null===(t=h.query[null==e?void 0:e.keyValue])||void 0===t?void 0:t.toString(),l={};return(null==e?void 0:e.type)===k.V8.CheckboxButton?l.chipsClicked=t=>{t.stopPropagation(),ee(null==e?void 0:e.options,null==e?void 0:e.keyValue)}:(l.chipsClicked=()=>{X({type:"radio",onClickEvent:t=>ee(t,null==e?void 0:e.keyValue),title:null==e?void 0:e.name,current:n||"0",options:null==e?void 0:e.options})},l.iconClass=n?"icon-close":"icon-chevron_down",n&&(l.iconClicked=t=>{var i;t.stopPropagation(),ee(null==e?void 0:null===(i=e.options)||void 0===i?void 0:i.find(e=>(null==e?void 0:e.id)===0),null==e?void 0:e.keyValue)})),(0,s.createElement)(B,{className:y().chips,...l,active:!!n,key:null==e?void 0:e.keyValue},n?(null==e?void 0:e.type)===k.V8.CheckboxButton?null==e?void 0:e.name:null==e?void 0:null===(i=e.options.find(e=>{var t;return(null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString())===n}))||void 0===i?void 0:i.name:null==e?void 0:e.name)}))&&void 0!==t?t:(0,n.jsx)(n.Fragment,{})},[ee,h]),ea=(0,s.useMemo)(()=>{var e,t,i,l;let s=null===(e=h.query.searchOn)||void 0===e?void 0:e.toString(),a=null==r?void 0:null===(t=r.searchOptions)||void 0===t?void 0:t.map(e=>{var t;return{id:null==e?void 0:e.searchOnKey,name:null==e?void 0:e.name,eventName:null==e?void 0:null===(t=e.events)||void 0===t?void 0:t.eventName}});return(0,n.jsx)(B,{className:y().all,iconClass:"icon-chevron_down",chipsClicked:e=>{e.stopPropagation(),X({type:"radio",onClickEvent:e=>ee(e,"searchOn"),title:"جستجو در",current:s||"",options:a})},children:null!==(l=null==a?void 0:null===(i=a.find(e=>{var t;return(null==e?void 0:e.id)===(null==h?void 0:null===(t=h.query)||void 0===t?void 0:t.searchOn)}))||void 0===i?void 0:i.name)&&void 0!==l?l:"همه"})},[r,h]),eo=(0,s.useMemo)(()=>{let e=[],t=h.query.searchOn?6:2;for(let a=0;a<t;a++)for(let t=0;t<(null==r?void 0:r.data.length);t++){var i,n,l,s;(null==r?void 0:null===(i=r.data[t])||void 0===i?void 0:i.results[a])&&e.push({...null==r?void 0:null===(n=r.data[t])||void 0===n?void 0:n.results[a],type:null==r?void 0:null===(l=r.data[t])||void 0===l?void 0:l.type,eventName:null==r?void 0:null===(s=r.data[t])||void 0===s?void 0:s.events.clickEventName})}return{chips:e,relatedSearchTitle:null==r?void 0:r.relatedSearchTitle}},[r,h]),er=(0,s.useMemo)(()=>{let e=Object.keys(h.query).filter(e=>"term"!==e&&"searchOn"!==e).length;return(0,n.jsxs)("div",{className:y().filterWrapper,children:[(0,n.jsx)(B,{chipsClicked:()=>X({type:"filterButton",filterOptions:null==o?void 0:o.filterOptions,changePage:ee}),active:!0,className:y().mobileChips,children:"فیلتر"}),!!e&&(0,n.jsx)("div",{className:y().filterCount,children:(0,g.Iq)(e)})]})},[o,ee,h]),ec=(0,s.useMemo)(()=>{let e=h.query,t=et(null==o?void 0:o.tabOptions),i=ei(null==o?void 0:o.sortOptions[0]);return(0,n.jsxs)("div",{ref:K,className:y().chipsList,children:[er,!!e.tab&&t,!!e.sort&&i,es(null==o?void 0:o.filterOptions.filter(e=>!!h.query[null==e?void 0:e.keyValue])),!e.tab&&t,!e.sort&&i,es(null==o?void 0:o.filterOptions.filter(e=>!h.query[null==e?void 0:e.keyValue]))]})},[et,ei,es,o,h]);return(0,s.useEffect)(()=>{var e;(null==K?void 0:null===(e=K.current)||void 0===e?void 0:e.scrollLeft)&&(K.current.scrollLeft=100)},[o]),0!==o.tabItems.items.length||Object.keys(h.query).filter(e=>"term"!==e).length||I?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"".concat(y().top,"\n					 ").concat(V>=(null==w?void 0:null===(t=w.current)||void 0===t?void 0:t.offsetHeight)+(P<768?40:0)?y().scrolled:""),ref:w,children:[(0,n.jsxs)("div",{className:"".concat(y().title," container"),children:[(0,n.jsx)("h1",{children:u?(0,g.Dy)(r.pageTitle.split("\xbb")[0]+"\xbb در"):r.pageTitle}),u&&ea]}),(0,n.jsx)("div",{className:y().advancedSearch,children:u||0===r.data.length||"content"===D.searchOn?null:D.searchOn?(0,n.jsx)(z,{initChipsPackage:r.data[0],pageSetting:D,isMobile:u}):(0,n.jsx)(U,{chipsPackages:r.bookNameBar?[r.bookNameBar,...r.data]:[...r.data],pageSetting:D})})]}),u&&(0,n.jsx)("div",{className:"container ".concat(y().chipsContainer),children:ec}),!u&&(0,n.jsx)("div",{className:"".concat(y().tabs," ").concat(V>=(null==w?void 0:null===(i=w.current)||void 0===i?void 0:i.offsetHeight)+(P<768?40:0)?y().scrolled:"","\n				").concat(V>=(null==w?void 0:null===(l=w.current)||void 0===l?void 0:l.offsetHeight)&&v===k.Nm.down?y().hide:"","\n				"),children:(0,n.jsx)(m,{tabsList:o.tabOptions,selectedTab:Number(h.query.tab)||0,className:y().removeBorder,children:o.tabOptions.map(e=>(0,n.jsx)(p,{tabsLength:o.tabOptions.length,thisTab:e,onClick:()=>ee(e,"tab"),selectedTab:Number(h.query.tab)||0},e.id))})}),!u&&(0,n.jsxs)("div",{className:"container ".concat(y().moreButton),children:[P>576&&D.filters.map(e=>{var t;let i="";return null==o||null===(t=o.filterOptions)||void 0===t||t.forEach(t=>{t.type===k.V8.CheckboxButton?t.keyValue===e.split("=")[0]&&(i=t.name):t.options.forEach(t=>{t.id===+e.split("=")[1]&&(i=t.name)})}),(0,n.jsx)(c,{text:i,onClose:()=>Y(e.split("=")[0])},e)}),o.filterOptions&&o.filterOptions.length?(0,n.jsxs)("button",{ref:S,onClick:()=>{L(e=>!e),(0,H.C)("Website_Search_Filter_Click",null==j?void 0:j.id,h.query.tab)},className:"".concat(y().button," ").concat(y().filter," ").concat(E?y().clicked:""),children:[P<576&&D.filters.length?(0,n.jsx)("div",{className:y().badge,children:(0,g.Iq)(D.filters.length)}):null,(0,n.jsx)("span",{children:"فیلتر"}),E&&(P>576?(0,n.jsx)(b.Z,{options:o.filterOptions,pageSetting:D,setPageSetting:A,setLoading:T}):(0,n.jsx)(J.Z,{options:o.filterOptions,pageSetting:D,setPageSetting:A,setFilterBox:L,setLoading:T}))]}):null,(0,n.jsxs)("button",{ref:N,onClick:()=>{q(e=>!e),(0,H.C)("Website_Search_Sort_Click",null==j?void 0:j.id,h.query.tab)},className:"".concat(y().button," ").concat(y().sort," ").concat(M?y().clicked:""),children:[(0,n.jsx)("span",{children:o.sortOptions[0].options.find(e=>e.id==D.sort).name}),M&&(P>576?(0,n.jsx)(b.Z,{sort:!0,options:o.sortOptions,pageSetting:D,setPageSetting:A,setLoading:T}):(0,n.jsx)(J.Z,{options:o.sortOptions,pageSetting:D,setPageSetting:A,setSortBox:q,setLoading:T}))]})]}),(0,n.jsx)(en,{...G,setModal:X,isMobile:u,type:null==G?void 0:G.type,changeQuery:$,setLoading:T,searchPageConfig:o}),I?(0,n.jsx)(O.Z,{}):0!==o.tabItems.items.length?(0,n.jsx)(Z,{bookList:o.tabItems.items,hasMore:o.tabItems.hasMore,nextOffset:o.tabItems.nextOffset,isMobile:u,mobileChips:eo}):(0,n.jsxs)("div",{className:y().noResultFilter,children:["برای فیلتر‌های انتخاب شده، نتیجه‌ای یافت نشد.",(0,n.jsx)("br",{})," با فیلترهای دیگری امتحان کن."]})]}):(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("h1",{className:y().noResult,children:"نتیجه‌ای برای جست‌وجوی \xab".concat(h.query.term,"\xbb یافت نشد :(")})})},ea=i(9008),eo=i.n(ea),er=!0,ec=e=>{let{searchPageConfig:t,searchPageChips:i,title:s,isMobile:a}=e;return t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eo(),{children:[(0,n.jsx)("title",{children:s}),(0,n.jsx)("meta",{name:"description",content:s}),(0,n.jsx)("meta",{name:"robots",content:"noindex"}),(0,n.jsx)("link",{rel:"start",href:"https://taaghche.com",title:"Search"}),(0,n.jsx)("meta",{name:"og:title",content:s}),(0,n.jsx)("meta",{name:"og:url",content:"https://taaghche.com/search"}),(0,n.jsx)("meta",{name:"og:type",content:"article"}),(0,n.jsx)("meta",{name:"og:description",content:s})]}),(0,n.jsx)(A,{children:(0,n.jsx)(es,{searchPageConfig:t,searchPageChips:i,isMobile:a})})]}):(0,n.jsx)(l.default,{})}},20343:function(e){e.exports={toggleButton:"toggle_toggleButton___bEfp",slider:"toggle_slider__vylO9",disableUnchecked:"toggle_disableUnchecked__iB2Ez",disableChecked:"toggle_disableChecked__dvmEP",dark:"toggle_dark__ESCOJ"}},27735:function(e){e.exports={chips:"chips_chips__9N2lF",hover:"chips_hover__HeNcJ",text:"chips_text__FoEmT",close:"chips_close__Ple77"}},77006:function(e){e.exports={chipsPackages:"advanceSearch_chipsPackages__gAJ_s",chipsPachage:"advanceSearch_chipsPachage__GIycy",chipsPackageTitle:"advanceSearch_chipsPackageTitle__SfR_P",hideMoreItem:"advanceSearch_hideMoreItem__66mbg",childOfHideMore:"advanceSearch_childOfHideMore__l9mqr",more:"advanceSearch_more__fQjHw"}},91313:function(e){e.exports={chips:"chips_chips__oMEDc",hover:"chips_hover__ssfgd",active:"chips_active__QJ3Oy",text:"chips_text__tq81N",leftMargin:"chips_leftMargin__inNhP"}},36227:function(e){e.exports={chipsPackages:"chipsList_chipsPackages__I82Qy",chipsPackage:"chipsList_chipsPackage__N27SI",chipsPackageTitle:"chipsList_chipsPackageTitle___Lizt",childOfHideMore:"chipsList_childOfHideMore__P6uXz",more:"chipsList_more__HO8lu"}},65385:function(e){e.exports={chipsContainer:"search_chipsContainer__oKDFz",chipsList:"search_chipsList__6mQat",filterWrapper:"search_filterWrapper__kDg_S",mobileChips:"search_mobileChips__TweKm",filterCount:"search_filterCount__IQ6xN",chips:"search_chips__P5Sr_",top:"search_top___t9x_",scrolled:"search_scrolled__WZ4M7",title:"search_title__tOGOB",all:"search_all__qdzsl",advancedSearch:"search_advancedSearch__ZJUFb",tabs:"search_tabs__k_lEX",hide:"search_hide__xaeVu",removeBorder:"search_removeBorder__JhBsb",noResult:"search_noResult__KFDRo",noResultFilter:"search_noResultFilter__kyqCf",moreButton:"search_moreButton__NYU20",button:"search_button__dGT_B",clicked:"search_clicked__XRB6_",sort:"search_sort__DbpIL",filter:"search_filter__NlJcB",badge:"search_badge___Torr"}},26088:function(e){e.exports={chipsList:"searchBookList_chipsList__Gv7ec",chipsRow:"searchBookList_chipsRow__u4sDO",chip:"searchBookList_chip__r01DH",bookList:"searchBookList_bookList__OQGEd",title:"searchBookList_title__4SciD",getMoreOldContainer:"searchBookList_getMoreOldContainer__VASYv",getMoreOld:"searchBookList_getMoreOld__3e9f8",bounce:"searchBookList_bounce__VMQHP",warning:"searchBookList_warning__yDX8g"}},10096:function(e){e.exports={tabs:"Tabs_tabs__76PHe",tab:"Tabs_tab__bb4MH",selected:"Tabs_selected__BKyVD"}}},function(e){e.O(0,[5465,9774,2888,179],function(){return e(e.s=35243)}),_N_E=e.O()}]);