(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9245,8683],{21252:function(e,t,o){"use strict";o.d(t,{Z:function(){return f}});var s=o(85893),i=o(67294),n=o(7173),r=o.n(n),a=o(5152),l=o.n(a),d=o(97163),c=o(82899),u=o(4896),b=o(4108),p=o(95692),x=o(67799),_=o(32071);let h=l()(()=>o.e(5904).then(o.bind(o,5904)),{loadableGenerated:{webpack:()=>[5904]}});var k=e=>{let{book:t,isGiantCard:o,inList:n}=e,[r,a]=(0,i.useState)(!1),l=(0,i.useContext)(c.sB),k=(0,i.useContext)(u.uL),{tpv:f}=(0,i.useContext)(d.ZX),g=(0,i.useCallback)(()=>{l({book:t,orderType:x.ed.Full,showPlayer:!0})},[l]),v=(0,i.useCallback)(()=>{let e=t.myLibraryStatus===x.n_.interested;(0,p.z1)(e,t.id,t.title)},[t]),m=(0,i.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),(0,b.tm)("Website_Bd_Click",{bookId:t.id,pageTitle:document.title,inList:n,tpv:null!=f?f:"",url:window.location.href}),"Audio"===t.type){if(!t.encrypted)return g();window.innerWidth>=992?k({type:"push",value:{type:u.pC.Info,msg:"لطفاً برای شنیدن این کتاب صوتی از اپلیکیشن طاقچه استفاده کنید"}}):a(!0)}else switch((0,p.Yp)(t)){case"epub":return v();case"pdf":k({type:"push",value:{type:u.pC.Info,msg:"لطفاً برای مطالعه‌ی کتاب‌های PDF از اپلیکیشن طاقچه استفاده کنید"}});break;default:k({type:"push",value:{type:u.pC.Error,msg:"مشکلی رخ داده است. لطفا بعدا دوباره تلاش کنید"}})}},[t,g,v,k,n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{onClickCapture:m,children:(0,s.jsx)(_.default,{isGiantCard:o,book:t,inLib:!0})}),r&&(0,s.jsx)(h,{onClose:()=>{a(!1)},isOpen:r,bookId:t.id})]})},f=e=>{let{bookList:t,inLib:o,isGiantCard:n}=e,a=(0,i.useMemo)(()=>o?k:_.default,[o]);return(0,s.jsx)("div",{className:"".concat(r().bookList," ").concat(n?r().giantMobile:""," ").concat(o?r().inLib:""),children:(0,s.jsx)("div",{children:t.books.map((e,t)=>(0,s.jsx)(a,{isGiantCard:n,book:e,inLib:o,inList:!0},t))})})}},78683:function(e,t,o){"use strict";o.r(t);var s=o(85893),i=o(67294),n=o(49706),r=o(4108),a=o(67799),l=o(45347),d=o(961),c=o.n(d);t.default=e=>{let{children:t,box:o}=e,{user:d}=(0,i.useContext)(n.V);return(o.type===a.dX.Shortcut||o.type<4)&&(0,s.jsxs)("div",{className:c().box+(o.type===a.dX.Shortcut?" "+c().shortcutBox:""),children:[(0,s.jsxs)("div",{className:c().header,children:[o.type!==a.dX.Content&&o.title&&(0,s.jsx)("h2",{className:c().title,children:o.title}),o.subtitle&&(0,s.jsx)("h3",{className:c().subtitle,children:o.subtitle}),o.destination&&o.destination.type!==a.gG.NoWhere&&(0,s.jsx)(l.Z,{destination:o.destination,children:(0,s.jsxs)("span",{id:o.eventId,className:c().all,onClick:()=>{var e,t;"/"===window.location.pathname&&o.type===a.dX.Book&&(0,r.q$)("homePage_bookBox_showMore",null!==(e=null==d?void 0:d.id)&&void 0!==e?e:0,{boxTitle:null!==(t=o.title)&&void 0!==t?t:""})},children:["مشاهده همه",(0,s.jsx)("span",{className:"".concat(c().back," icon-chevron_left")})]})})]}),t]})}},93420:function(e,t,o){"use strict";var s=o(85893),i=o(67799),n=o(78683),r=o(32071),a=o(92266),l=o.n(a),d=o(5152),c=o.n(d);let u=c()(()=>Promise.all([o.e(6502),o.e(7526)]).then(o.bind(o,72073)),{loadableGenerated:{webpack:()=>[72073]}}),b=c()(()=>o.e(2544).then(o.bind(o,2544)),{loadableGenerated:{webpack:()=>[2544]}}),p=c()(()=>Promise.all([o.e(6502),o.e(560)]).then(o.bind(o,90560)),{loadableGenerated:{webpack:()=>[90560]}}),x=c()(()=>Promise.all([o.e(6502),o.e(5992)]).then(o.bind(o,95992)),{loadableGenerated:{webpack:()=>[95992]}});t.Z=e=>{let{box:t,device:o}=e;return(0,s.jsx)(n.default,{box:t,children:function(e,t){switch(e.type){case i.dX.Book:return"mobile"===t?(0,s.jsx)("div",{className:l().noSwiper,children:e.bookData.books.map((t,o)=>(0,s.jsx)(r.default,{book:t,boxTitle:e.title},o))}):(0,s.jsx)(u,{box:e});case i.dX.Banner:return(0,s.jsx)(x,{box:e,boxTitle:e.title});case i.dX.Content:return(0,s.jsx)(b,{box:e});case i.dX.Shortcut:return(0,s.jsx)(p,{box:e})}}(t,o)})}},19747:function(e,t,o){"use strict";var s=o(85893),i=o(93420),n=o(21252),r=o(67294),a=o(26730),l=o(72366),d=o.n(l),c=o(68547),u=o(63144),b=o.n(u),p=o(11163),x=o(6998),_=o(43077),h=o(48739),k=o(35305),f=o(97163);t.Z=e=>{var t;let o=(0,p.useRouter)(),[l,u]=(0,r.useState)(e.pageConfig),[g,v]=(0,r.useState)(!1),[m,j]=(0,r.useState)({order:+o.query.order||(null===(t=l.sortOptions)||void 0===t?void 0:t[0].options[0].id)||5}),[y,C]=(0,r.useState)(!1),[L,w]=(0,r.useState)(!1),{setCategoryId:S}=(0,r.useContext)(f.vg),{setTpv:N}=(0,r.useContext)(f.ZX),O=(0,r.useRef)(null),B=(0,r.useRef)(null),{windowWidth:Z}=(0,x.Z)();(0,k.Z)(B,()=>Z>576&&C(!1),[Z]);let T=l.hasMore,I=()=>{let t=(0,a.ku)(e.filters,l.nextOffset,+o.query.order);b()(t).then(async e=>{try{let t=await e.json(),o={...l};o.nextOffset=t.nextOffset,o.hasMore=t.hasMore,t.boxes&&(o.boxes=[...l.boxes,...t.boxes]),t.bookList&&t.bookList.books&&(l.bookList||(l.bookList={books:[]}),o.bookList={booksType:t.bookList.booksType,title:t.bookList.title,currentSpinnerPosition:t.bookList.currentSpinnerPosition,spinnerItems:t.bookList.spinnerItems,books:[...l.bookList.books,...t.bookList.books]}),u(o)}catch(e){console.log(e)}})};return(0,r.useEffect)(()=>{w(!1)},[o.query]),(0,r.useEffect)(()=>{let e;return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?(e=new IntersectionObserver(e=>{e[0].isIntersecting&&I()},{rootMargin:"200px 0px 0px"}),O.current&&e.observe(O.current)):v(!0),()=>{e&&e.disconnect()}},[l]),(0,r.useEffect)(()=>{var t;let o=e.pageConfig;return(0,a.QA)(o),u(o),S((null===(t=o.breadcrumb)||void 0===t?void 0:t.type)?o.breadcrumb.value:0),N(o.tpv),()=>{N(void 0)}},[e.pageConfig]),(0,r.useEffect)(()=>{L&&C(!1)},[L]),(0,s.jsxs)("div",{className:"".concat(e.className?d()[e.className]:null," container"),children:[l.title&&(0,s.jsx)("h1",{className:d().title,children:l.title}),(!l.boxes||0===l.boxes.length)&&(0,s.jsx)("div",{className:d().pageConfigBox,children:l.sortOptions&&(0,s.jsx)("div",{className:d().sort,children:(0,s.jsxs)("button",{ref:B,onClick:()=>{C(e=>!e)},className:"".concat(d().button," ").concat(d().sort," ").concat(y?d().clicked:""),children:[(0,s.jsx)("span",{children:(l.sortOptions[0].options.find(e=>e.id==m.order)||l.sortOptions[0].options[0]).name}),y&&(Z>576?(0,s.jsx)(_.Z,{sort:!0,options:l.sortOptions,pageSetting:m,setPageSetting:j,setLoading:w,align:"right"}):(0,s.jsx)(h.Z,{options:l.sortOptions,pageSetting:m,setPageSetting:j,setSortBox:C,setLoading:w}))]})})}),L?(0,s.jsx)(c.Z,{}):(0,s.jsxs)("div",{className:d().content,children:[l.boxes&&l.boxes.map((t,o)=>{var n;return(0,s.jsx)(i.Z,{box:t,device:null!==(n=e.device)&&void 0!==n?n:"desktop"},o)}),l.bookList&&(0,s.jsx)(n.Z,{bookList:l.bookList,inLib:!1,isGiantCard:!0}),!l.boxes&&!l.bookList&&e.inSearch&&(0,s.jsx)("p",{className:d().notFound,children:"نتیجه‌ای یافت نشد. عبارت دیگری را امتحان کن."}),g&&(0,s.jsxs)("p",{className:d().warning,children:["مرورگر شما به صورت کامل از امکانات طاقچه پشتیبانی نمیکند. لطفاً از نسخه جدید مرورگر Chrome یا FireFox استفاده کنید. برای راهنمایی بیشتر لطفا با پشیبانی طاقچه به شماره",(0,s.jsx)("a",{className:d().tel,href:"tel:+982191071001",children:"+۹۸ ۲۱ ۹۱۰ ۷۱۰ ۰۱"}),"تماس بگیرید."]}),g&&T&&(0,s.jsx)("button",{className:d().getMoreOld,onClick:I,children:"مشاهده کتاب‌های بیشتر"}),!g&&T&&(0,s.jsx)("div",{ref:O,children:(0,s.jsx)(c.Z,{})})]})]})}},7173:function(e){e.exports={bookList:"bookList_bookList__8EOdp",giantMobile:"bookList_giantMobile__g_7mS",inLib:"bookList_inLib__ADZsp"}},961:function(e){e.exports={box:"SharedBox_box___4zCp",shortcutBox:"SharedBox_shortcutBox__QhwPR",header:"SharedBox_header__yStlU",title:"SharedBox_title__jLOUY",subtitle:"SharedBox_subtitle__u5atd",all:"SharedBox_all__iDrJg",back:"SharedBox_back__sghdd"}},92266:function(e){e.exports={noSwiper:"box_noSwiper__TRTOv"}},72366:function(e){e.exports={title:"filter_title__n67Uy",getMoreOld:"filter_getMoreOld__kf33A",warning:"filter_warning__3k9zT",notFound:"filter_notFound__vC7by",noTitle:"filter_noTitle__qusky",button:"filter_button__Ctgu2",clicked:"filter_clicked__HbWKE",sort:"filter_sort__ZFhoW",pageConfigBox:"filter_pageConfigBox__MuITJ",displayType:"filter_displayType__E5g2O",divider:"filter_divider__NY94i",content:"filter_content__8RPtq"}}}]);