(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5465],{32071:function(e,o,t){"use strict";t.r(o);var a=t(85893),r=t(67294),i=t(67799),l=t(85786),n=t(60690),s=t.n(n),d=t(41664),c=t.n(d),u=t(45347),_=t(4108),h=t(49706),f=t(97163),m=t(5022);let p=[20,30,50,70,80,100],b=e=>{var o;let{notLazy:t,placeHolder:r,...i}=e;return t?(0,a.jsx)("img",{...i,alt:null!==(o=null==i?void 0:i.alt)&&void 0!==o?o:""}):(0,a.jsx)(m.X,{placeHolder:r,...i})},v=r.memo(e=>{let{book:o,isGiantCard:t,inLib:n,boxTitle:d,inList:m}=e,{user:v}=(0,r.useContext)(h.V),{tpv:k}=(0,r.useContext)(f.ZX),x=(0,r.useMemo)(()=>{var e;return!!(null==o?void 0:null===(e=o.types)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.id)===(null===i.MC||void 0===i.MC?void 0:i.MC.Audio)))},[o]),C=(0,r.useMemo)(()=>"/".concat(x?"audiobook":"book","/").concat(o.id,"/").concat((0,l.QN)(o.title)),[o,x]),y=(0,r.useMemo)(()=>"".concat(o.title," ").concat(o.authors[0]?"اثر ".concat(o.authors[0].firstName," ").concat(o.authors[0].lastName):""),[o]),g=(0,r.useMemo)(()=>(0,a.jsx)("div",{className:s().chips,children:o.types.map(e=>e.name).join(" | ")}),[o.types,t]),j=(0,r.useMemo)(()=>{if(n)return;let e=0;if(null==o||o.types.every(o=>(null==o?void 0:o.beforeOffPrice)===0&&(null==o?void 0:o.price)===0?(e="free",!1):(e=Math.max(e,((null==o?void 0:o.beforeOffPrice)-(null==o?void 0:o.price))/(null==o?void 0:o.beforeOffPrice)),!0)),e){let r="free";if("free"!==e){var t;e=5*Math.round(20*e);let o=0;for(;e>=p[o];)o++;r=null!==(t=p[o-1])&&void 0!==t?t:20}return(0,a.jsx)("div",{className:s().off,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(b,{notLazy:null==o?void 0:o.notLazy,placeHolder:"",className:"".concat(s().offImage," ").concat(s()["Amount".concat(r)]),alt:"off",src:"/images/vitrin/Amount=".concat(r,".svg")}),"free"!==e&&(0,a.jsx)("div",{className:s().offText,children:"٪".concat((0,l.Iq)(e))})]})})}},[o,n]),N=(0,r.useMemo)(()=>{if(o.subscriptionAvailable)return(0,a.jsx)(b,{notLazy:null==o?void 0:o.notLazy,placeHolder:"",className:s().infinityBadge,alt:"subscriptionAvailable",src:"/images/vitrin/infinity-badge.svg"})},[o]),B=(0,r.useMemo)(()=>(0,a.jsx)("div",{className:s().priceBox,children:0===o.price?(0,a.jsx)("span",{className:s().free,children:"رایگان"}):(0,a.jsxs)(a.Fragment,{children:[o.beforeOffPrice?(0,a.jsx)("span",{className:s().beforeOffPrice,children:(0,l.Iq)((0,l.oC)(o.beforeOffPrice))}):"",(0,a.jsx)("span",{className:s().price,children:(0,l.Iq)((0,l.oC)(o.price))}),(0,a.jsx)("span",{className:s().unit,children:"ت"})]})}),[o]),q=(0,r.useMemo)(()=>(0,a.jsx)("div",{className:s().prices,children:o.types.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[null==e?void 0:e.name,"\xa0",(null==e?void 0:e.beforeOffPrice)!==0&&(0,a.jsx)(b,{notLazy:null==o?void 0:o.notLazy,placeHolder:"",className:s().offBadge,alt:"off",src:"/images/vitrin/offBadge.svg"})]}),(0,a.jsx)("div",{className:(null==e?void 0:e.price)!==0?s().toman:"",children:(null==e?void 0:e.price)===0?"رایگان":(0,a.jsxs)(a.Fragment,{children:[(0,l.Iq)((0,l.oC)(e.price)),"\xa0",(0,a.jsx)("span",{children:"ت"})]})})]},e.name))}),[o]),w=(0,r.useCallback)(e=>{let o=0,t;for(t=0;t<e.length&&t<5;t++){let a=e.charCodeAt(t);a>=65&&a<=122&&o++}return o/t>.5},[]),A=(0,r.useMemo)(()=>{var e,t,a;let r={publisher:o.publisher,title:o.title,author:null!==(a=(null==o?void 0:null===(e=o.authors[0])||void 0===e?void 0:e.firstName)+(null==o?void 0:null===(t=o.authors[0])||void 0===t?void 0:t.lastName))&&void 0!==a?a:""},i={};return Object.keys(r).forEach(e=>{i[e]={direction:w(r[e])?"ltr":"rtl"}}),i},[o]),S=(0,r.useMemo)(()=>{var e;return(null==o?void 0:o.rating)?(0,a.jsxs)("div",{className:s().rate,children:[(0,a.jsx)("span",{className:"".concat(s().star," icon-star-2")}),(0,a.jsx)("span",{className:s().rateNumber,children:(0,l.Iq)(null==o?void 0:null===(e=o.rating)||void 0===e?void 0:e.toFixed(1))}),"(",(0,l.Iq)(null==o?void 0:o.rates.reduce((e,o)=>e+(null==o?void 0:o.count),0)),")"]}):null},[o]),V=(0,r.useCallback)(e=>{var t;e.stopPropagation(),"/"===window.location.pathname&&(0,_.q$)("homePage_bookCard_author",null!==(t=null==v?void 0:v.id)&&void 0!==t?t:0,{bookId:o.id,bookTitle:o.title,bookType:o.types.map(e=>null==e?void 0:e.name).join(" "),boxTitle:null!=d?d:"",authorName:o.authors[0].firstName+" "+o.authors[0].lastName})},[o,v]),P=(0,r.useCallback)(()=>{var e;"/"===window.location.pathname&&(0,_.q$)("homePage_bookCard",null!==(e=null==v?void 0:v.id)&&void 0!==e?e:0,{bookId:o.id,bookTitle:o.title,bookType:o.types.map(e=>null==e?void 0:e.name).join(" "),boxTitle:null!=d?d:""}),(0,_.tm)("Website_Bd_Click",{bookId:o.id,boxTitle:null!=d?d:"",pageTitle:document.title,inList:!!m,tpv:null!=k?k:"",url:window.location.href})},[o,v,k,m]);return(0,a.jsxs)("div",{onClick:P,className:"".concat(s().book," ").concat(x?s().audioBook:""," ").concat(n?s().inLib:""," ").concat(t?s().giantCard:""," ignore-swiper-style"),children:[(0,a.jsxs)(c(),{href:C,passHref:!0,rel:"nofollow",className:s().bookCoverContainer,children:[j,N,(0,a.jsx)(b,{src:o.coverUri+"?w=150",placeHolder:x?"/placeholders/audiobg.svg":"/placeholders/bookbg.svg",alt:y,title:y,className:s().bookCover,notLazy:null==o?void 0:o.notLazy})]}),(0,a.jsxs)("div",{className:s().contentWrapper,children:[(0,a.jsxs)("div",{className:s().bookInfo,children:[(0,a.jsx)(c(),{href:C,passHref:!0,children:(0,a.jsx)("div",{style:A.title,className:s().bookTitle,children:o.title})}),o.authors&&o.authors.length>0&&(0,a.jsx)(u.Z,{className:s().bookAuthor,destination:{type:i.gG.Filters,filters:{slug:o.authors[0].slug,list:[{type:i.vA.author,value:o.authors[0].id}]}},children:(0,a.jsxs)("div",{style:A.author,className:s().bookAuthor,onClick:V,children:[o.authors[0].firstName," ",o.authors[0].lastName]})}),!n&&S]}),t&&!n&&q,g,!n&&B]})]})});o.default=v},43077:function(e,o,t){"use strict";var a=t(85893),r=t(65278),i=t.n(r),l=t(67294),n=t(67799),s=t(11163),d=t(57261),c=t(49706);o.Z=e=>{let{options:o,title:t,pageSetting:r,setPageSetting:u,sort:_=!1,setLoading:h,align:f="left"}=e,m=(0,s.useRouter)(),{user:p}=(0,l.useContext)(c.V),b=(e,t)=>{(0,d.C)(o.find(e=>e.keyValue==t).options.find(o=>o.id==+e.target.value).eventName,null==p?void 0:p.id,r.tab),u(o=>0!=+e.target.value?(m.push({pathname:m.asPath.split("?")[0],query:{...m.query,[t]:e.target.value}}),h(!0),_)?{...o,[t]:e.target.value}:{...o,filters:[...o.filters,"".concat(t,"=").concat(e.target.value)]}:(delete m.query[t],m.push({pathname:m.asPath.split("?")[0],query:{...m.query}}),h(!0),_)?{...o,[t]:e.target.value}:{...o,filters:o.filters.filter(e=>!e.includes(t))})},v=e=>{(0,d.C)(o.find(o=>o.keyValue==e).options,null==p?void 0:p.id,r.tab),u(o=>o.filters.some(o=>o.includes(e))?(delete m.query[e],m.push({pathname:m.asPath.split("?")[0],query:{...m.query}}),h(!0),{...o,filters:o.filters.filter(o=>!o.includes(e))}):(m.push({pathname:m.asPath.split("?")[0],query:{...m.query,[e]:!0}}),h(!0),{...o,filters:[...o.filters,"".concat(e,"=true")]}))},k=(e,o)=>{if(_)return o.id==r[e.keyValue];{let t=r.filters.find(o=>o.includes(e.keyValue));return t?+t.split("=")[1]===o.id:0===o.id}};return(0,a.jsxs)("div",{className:"".concat(i().box," ").concat("right"===f?i().right:""),onClick:e=>e.stopPropagation(),children:[t&&(0,a.jsx)("span",{children:t}),o.map((e,t)=>{switch(e.type){case n.V8.CheckboxButton:return(0,a.jsxs)("label",{className:"".concat(i().checkboxButton," ").concat(o.length-1!==t?i().divider:""),children:[(0,a.jsx)("input",{type:"checkbox",id:e.id.toString(),checked:r.filters.some(o=>o.includes(e.keyValue)),onChange:()=>v(e.keyValue)}),e.name]},e.keyValue);case n.V8.RadioButton:return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:i().title,children:e.name},e.keyValue),e.options.map(o=>(0,a.jsxs)("label",{className:i().radioButton,children:[(0,a.jsx)("input",{type:"radio",id:o.id.toString(),value:o.id,checked:k(e,o),onChange:o=>b(o,e.keyValue)}),o.name]},o.eventName))]});default:return null}})]})}},48739:function(e,o,t){"use strict";var a=t(85893),r=t(72900),i=t.n(r),l=t(67294),n=t(67799),s=t(11163),d=t(80899),c=t(57261),u=t(49706);o.Z=e=>{let{options:o,title:t,pageSetting:r,setPageSetting:_,setSortBox:h,setFilterBox:f,setLoading:m}=e,p=(0,s.useRouter)(),{user:b}=(0,l.useContext)(u.V),v=(e,t)=>{(0,c.C)(o.find(e=>e.keyValue==t).options.find(o=>o.id==+e.target.value).eventName,null==b?void 0:b.id,r.tab),_(o=>0!=+e.target.value?(p.push({pathname:p.asPath.split("?")[0],query:{...p.query,[t]:e.target.value}}),m(!0),h)?{...o,[t]:e.target.value}:{...o,filters:[...o.filters,"".concat(t,"=").concat(e.target.value)]}:(delete p.query[t],p.push({pathname:p.asPath.split("?")[0],query:{...p.query}}),m(!0),h)?{...o,[t]:e.target.value}:{...o,filters:o.filters.filter(e=>!e.includes(t))}),h&&h(!1)},k=e=>{(0,c.C)(o.find(o=>o.keyValue==e).options,null==b?void 0:b.id,r.tab),_(o=>o.filters.some(o=>o.includes(e))?(delete p.query[e],p.push({pathname:p.asPath.split("?")[0],query:{...p.query}}),m(!0),{...o,filters:o.filters.filter(o=>!o.includes(e))}):(p.push({pathname:p.asPath.split("?")[0],query:{...p.query,[e]:!0}}),m(!0),{...o,filters:[...o.filters,"".concat(e,"=true")]}))},x=(e,o)=>{if(h)return o.id==r[e.keyValue];{let t=r.filters.find(o=>o.includes(e.keyValue));return t?+t.split("=")[1]===o.id:0===o.id}};return(0,a.jsx)(d.Z,{isOpen:!0,isfull:!1,closeModal:void 0,children:(0,a.jsxs)("div",{className:i().box,onClick:e=>e.stopPropagation(),children:[t&&(0,a.jsx)("span",{children:t}),o.map((e,o)=>{switch(e.type){case n.V8.CheckboxButton:return(0,a.jsxs)("label",{className:"".concat(i().checkboxButton," ").concat(i().divider),children:[(0,a.jsx)("input",{type:"checkbox",id:e.id.toString(),checked:r.filters.some(o=>o.includes(e.keyValue)),onChange:()=>k(e.keyValue)}),e.name]},o);case n.V8.RadioButton:return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:i().title,children:e.name},o),e.options.map(o=>(0,a.jsxs)("label",{className:i().radioButton,children:[(0,a.jsx)("input",{type:"radio",id:o.id.toString(),value:o.id,checked:x(e,o),onChange:o=>v(o,e.keyValue)}),o.name]},o.id))]});default:return null}}),f&&(0,a.jsxs)("div",{className:i().filterButton,children:[(0,a.jsx)("button",{onClick:()=>{_(e=>(r.filters.forEach(e=>{delete p.query[e.split("=")[0]]}),p.push({pathname:p.asPath.split("?")[0],query:{...p.query}}),m(!0),{...e,filters:[]})),f(!1)},children:"پاک کردن فیلترها"}),(0,a.jsx)("button",{onClick:()=>f(!1),children:"اعمال فیلتر"})]})]})})}},60690:function(e){e.exports={"one-line-ellipsis":"bookCard_one-line-ellipsis__OV71a",book:"bookCard_book__6dU_a",bookInfo:"bookCard_bookInfo__TcPHR",bookAuthor:"bookCard_bookAuthor__myAZB",bookTitle:"bookCard_bookTitle__ELp4O","two-line-clamp":"bookCard_two-line-clamp__GMCO4","shared-small-text":"bookCard_shared-small-text__Sh9sN",prices:"bookCard_prices__vp6SN",contentWrapper:"bookCard_contentWrapper__RMcu7",bookCoverContainer:"bookCard_bookCoverContainer__2xRO4",bookCover:"bookCard_bookCover__1L_jX",audioBook:"bookCard_audioBook__uC1zS",bookHover:"bookCard_bookHover__mFDjh",rate:"bookCard_rate__xAI8n",rateNumber:"bookCard_rateNumber__gtEnI",star:"bookCard_star__xqN8f",offBadge:"bookCard_offBadge__6RXn8",priceBox:"bookCard_priceBox__ykWUv",price:"bookCard_price__zOAwb",beforeOffPrice:"bookCard_beforeOffPrice__jsGyg",unit:"bookCard_unit__bTc6_",free:"bookCard_free__QKueo",chips:"bookCard_chips__c_JRw",off:"bookCard_off__XnK1T",offText:"bookCard_offText__2MPFw",offImage:"bookCard_offImage__cLnNq",Amount20:"bookCard_Amount20__JXBV2",Amount30:"bookCard_Amount30__NB29S",Amountfree:"bookCard_Amountfree__qHLbo",Amount50:"bookCard_Amount50__WOXCh",Amount70:"bookCard_Amount70__SlQFk",Amount80:"bookCard_Amount80__OJn5J",Amount100:"bookCard_Amount100__kWIbY",infinityBadge:"bookCard_infinityBadge__6YSX_",giantCard:"bookCard_giantCard__t_neI",toman:"bookCard_toman__D_3i2",inLib:"bookCard_inLib__JirXY"}},65278:function(e){e.exports={box:"dropDown_box__PASW_",right:"dropDown_right__agUiU",title:"dropDown_title__7Tgfc",radioButton:"dropDown_radioButton__LU_nq",divider:"dropDown_divider__JDDrA",checkboxButton:"dropDown_checkboxButton__seO83"}},72900:function(e){e.exports={box:"searchBottomSheet_box__GskZw",title:"searchBottomSheet_title__nwBEq",radioButton:"searchBottomSheet_radioButton__FoIZh",divider:"searchBottomSheet_divider__af9zG",checkboxButton:"searchBottomSheet_checkboxButton__cdyud",filterButton:"searchBottomSheet_filterButton__q__zU",filterButtonWrapper:"searchBottomSheet_filterButtonWrapper__IDWZy",filter:"searchBottomSheet_filter__lGJGS",remove:"searchBottomSheet_remove__qwkJf",disable:"searchBottomSheet_disable__4I2Lr",row:"searchBottomSheet_row__VzyVd",rowChips:"searchBottomSheet_rowChips__Nd7nW",line:"searchBottomSheet_line__Djaw8",results:"searchBottomSheet_results__r1Im0",horizontalLine:"searchBottomSheet_horizontalLine__7SXDH",resultsChips:"searchBottomSheet_resultsChips__c_ESn"}}}]);