"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2145],{52145:function(e,s,n){n.d(s,{Z:function(){return F}});var i,t,l=n(85893),a=n(11163),o=n(67294),d=n(49706),c=n(97163),r=n(44419),u=n(87911),h=n(93989),g=n(67799),x=n(29703),m=n(4360),j=n(67399),p=n(5152),v=n.n(p),_=n(41664),f=n.n(_),C=n(65535),N=n(68547),w=n(91655),S=n(32384),b=n(6723),k=n(60059),P=n.n(k);let I=v()(()=>Promise.all([n.e(9385),n.e(7049)]).then(n.bind(n,15110)),{loadableGenerated:{webpack:()=>[15110]}});var W=n(4896),Z=n(88419),D=n(76039),y=n(46110),E=n(92774);(i=t||(t={}))[i.none=0]="none",i[i.green=1]="green",i[i.white=2]="white";let O={[u.zD.firstView]:()=>{let[e,s]=(0,o.useState)(""),[n,i]=(0,o.useState)(!1),[t,d]=(0,o.useState)(!1),[r,x]=(0,o.useState)(!1),{username:m,setUsername:j,notify:p,setModalProps:v,mode:_,setMode:k}=(0,o.useContext)(u.Oj),W=(0,o.useContext)(c.pB),Z=(0,o.useRef)(null),D=(0,a.useRouter)(),y=()=>{d(!t)},E=()=>"email"===_&&(0,w.Mn)(m)?(p({message:"لطفا برای ورود با شماره موبایل از \xabورود با شماره موبایل\xbb استفاده کنید."}),!1):!!(("phone"!==_||(0,w.Mn)(m))&&("email"!==_||(0,w.Jh)(m)))||(p({message:"نوشته وارد شده نامعتبر است."}),!1),O=()=>{var e;j(""),k("phone"===_?"email":"phone"),null==Z||null===(e=Z.current)||void 0===e||e.focus()};return(0,o.useEffect)(()=>(s(window.location.search),()=>{i(!1)}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:P().subtitle,children:"خوش برگشتی :)"}),(0,l.jsx)("h1",{className:P().title,children:"ورود به حساب کاربری"}),(0,l.jsxs)("form",{className:P().form,children:[(0,l.jsx)(b.Z,{text:m,setText:e=>{if("email"===_){j(e);return}!(e.length>11)&&(/^[0123456789۰۱۲۳۴۵۶۷۸۹\b]+$/.test(e)||0===e.length?j(e):r||(x(!0),p({message:"لطفا برای ورود شماره موبایل خود را وارد کنید و برای ورود با ایمیل از \xabورود با ایمیل\xbb استفاده کنید."}),setTimeout(()=>x(!1),3e3)))},placeholder:"phone"===_?"شماره موبایل":"ایمیل",inputName:"phone"===_?"numeric":"email",pattern:"phone"===_?"[0-9]":"",focusedPlaceholder:"phone"===_?"۰۹*********":"example@email.com",ref:Z}),(0,l.jsx)(S.Z,{onClick:e=>{e.preventDefault();let s=m.replace(/\s+/g,"");j(s),E()&&(n||(i(!0),(0,w.e1)(s).then(e=>{e&&e.status==g.kF.Success?(h.n2.setContactCookie(m),e.loginWithPassword?D.push("/login/password"):window.location.href="/login/otpsender"):((null==e?void 0:e.errorType)===g.RN.ContactNotFound?v(s=>({...s,isOpen:!0,message:null==e?void 0:e.message,closeModalId:"Website_tg_SignIn_InfoModal",action:{type:"close",text:"متوجه شدم"}})):p(e),i(!1))})))},disable:m.length<=0,value:"ادامه",loading:n,id:"Website_tg_SignIn_EnterNum"})]}),(0,l.jsx)("div",{className:P().or,children:"یا"}),"phone"===_?(0,l.jsx)("div",{className:"".concat(P().otherways),onClick:O,children:(0,l.jsx)("div",{className:" ".concat(P().underline),id:"Website_tg_SignIn_Email",children:"ورود با ایمیل"})}):(0,l.jsxs)("div",{className:P().otherways,children:[W!==g.OG.WebView&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.Z,{type:"login",loadingComponent:()=>(0,l.jsx)("div",{children:(0,l.jsx)(N.Z,{className:P().googleLoading})}),children:(0,l.jsx)("div",{className:"".concat(P().loginWithGoogle," ").concat(P().underline),id:"Website_tg_SignIn_Google",children:"ورود با گوگل"})}),(0,l.jsx)("div",{className:P().divider})]}),(0,l.jsx)("div",{className:"".concat(P().underline),onClick:O,id:"Website_tg_SignIn_Email_Phone",children:"ورود با موبایل"})]}),(0,l.jsxs)("div",{className:P().registerLink,children:["حساب کاربری نداری؟"," ",(0,l.jsx)("span",{children:(0,l.jsx)(f(),{href:"/register".concat(e),passHref:!0,id:"Website_tg_SignIn_SignUpBTN",children:"ثبت‌نام"})})]}),(0,l.jsxs)("div",{className:P().privacyPolicy,onClick:y,id:"Website_tg_SignIn_Rules",children:["برای مشاهده ",(0,l.jsx)("span",{children:"قوانین استفاده"})," از طاقچه کلیک کنید."]}),t&&(0,l.jsx)(I,{isOpen:t,closeModal:y})]})},[u.zD.codePage]:()=>{var e;let[s,n]=(0,o.useState)(!1),[i,t]=(0,o.useState)(!1),[c,r]=(0,o.useState)(""),[h,x]=(0,o.useState)(!1),{login:m,setReturnAddress:j}=(0,o.useContext)(d.V),{username:p,setLoginState:v}=(0,o.useContext)(u.Oj),[_,f]=(0,o.useState)(!1),C=(0,o.useContext)(W.uL),N=(0,a.useRouter)(),b=(e,i)=>{e.preventDefault(),s||(n(!0),(0,w.zf)(p,c).then(e=>{e&&e.status==g.kF.Success?(m(e,!1),i?v(u.zD.setPassCode):j(()=>C({type:"push",value:{type:W.pC.Success,msg:e.message}}))):(f(!0),n(!1))}))};return(0,o.useEffect)(()=>(t(!0),()=>{n(!1)}),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:P().title,children:"خوش برگشتی :)"}),(0,l.jsxs)("div",{className:"".concat(P().subtitle," ").concat(P().subtitle2),children:["کد ورود به آدرس زیر ارسال شد.",(0,l.jsx)("div",{children:" کد دریافتی را وارد کن."})]}),(0,l.jsxs)("div",{className:P().editUsername,children:[(0,l.jsxs)("div",{onClick:()=>N.push("/login"),children:[(0,l.jsx)("div",{className:"icon-pen"}),(0,l.jsx)("div",{id:"Website_tg_SignIn_EditNum",children:"ویرایش"})]}),p]}),(0,l.jsxs)("div",{className:P().form,children:[(0,l.jsx)(D.Z,{setNumber:r,setEmpty:x,empty:h,showError:_}),i?(0,l.jsxs)("div",{className:P().countDownLine,children:[(0,l.jsxs)("span",{className:P().countDownText,children:["ارسال مجدد کد پس از"," "]}),(0,l.jsx)("span",{className:P().countDown,children:(0,l.jsx)(Z.Z,{start:i,done:()=>t(!1),from:119})})]}):(0,l.jsxs)("div",{className:P().resendCode,children:["کد را دریافت نکردی؟"," ",(0,l.jsx)("span",{id:"Website_tg_SignIn_OTP_ResendCode",onClick:()=>{s||(x(!0),window.location.href="/login/otpsender")},children:"ارسال مجدد"})]}),(0,l.jsx)(S.Z,{onClick:b,disable:4!==c.length,value:"ورود",loading:s,id:"Website_tg_SignIn_OTP_EnterCode"}),(null==N?void 0:null===(e=N.query)||void 0===e?void 0:e.haspass)==="true"?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:P().or,children:"یا"}),(0,l.jsx)("div",{className:P().togglePassAndCode,children:(0,l.jsx)(S.Z,{onClick:()=>{N.push("/login/password")},value:"ورود با رمز عبور",fill:!1})})]}):(0,l.jsx)(S.Z,{onClick:e=>b(e,!0),disable:4!==c.length,value:"ورود و ثبت رمز عبور",fill:!1,id:"Website_tg_SignIn_OTP_SetPassword",loading:s})]})]})},[u.zD.passPage]:()=>{let[e,s]=(0,o.useState)(""),[n,i]=(0,o.useState)(!1),[t,c]=(0,o.useState)(0),{username:r,notify:h}=(0,o.useContext)(u.Oj),{login:x,setReturnAddress:m}=(0,o.useContext)(d.V),j=(0,o.useContext)(W.uL),p=(0,a.useRouter)();return(0,o.useEffect)(()=>()=>i(!1),[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:P().title,children:"خوش برگشتی :)"}),(0,l.jsx)("div",{className:P().subtitle,children:"رمز عبور حساب کاربری را وارد کن."}),(0,l.jsxs)("div",{className:P().editUsername,children:[(0,l.jsxs)("div",{onClick:()=>p.push("/login"),children:[(0,l.jsx)("div",{className:"icon-pen"}),(0,l.jsx)("div",{id:"Website_tg_SignIn_EditNum",children:"ویرایش"})]}),r]}),(0,l.jsxs)("form",{className:P().form,children:[(0,l.jsx)(E.Z,{password:e,setPassword:s,placeholder:"رمز عبور"}),(0,l.jsx)(S.Z,{onClick:s=>{s.preventDefault(),n||(c(1),i(!0),(0,w.fZ)(r,y.Z.Shared.hash(e)).then(e=>{e&&e.status==g.kF.Success?(x(e,!1),j({type:"push",value:{type:W.pC.Success,msg:e.message}}),m()):(h(e),c(0),i(!1))}))},disable:e.length<=0||n,value:"ورود",loading:1===t&&n,id:"Website_tg_SignIn_Password_SighnInPassword"}),(0,l.jsx)("div",{className:P().or,children:"یا"}),(0,l.jsx)(S.Z,{onClick:e=>{e.preventDefault(),n||(i(!0),c(2),window.location.href="/login/otpsender",i(!1))},disable:n,value:"ورود با کد یک‌بار مصرف",loading:2===t&&n,fill:!1,id:"Website_tg_SignIn_Password_SighnInOTP"})]})]})},[u.zD.setPassCode]:m.Z};var F=e=>{let{state:s}=e,{modalProps:n,setUsername:i,loginState:t}=(0,o.useContext)(u.Oj),{loading:m,isAuthenticated:p,setReturnAddress:v}=(0,o.useContext)(d.V),_=(0,o.useContext)(c.Ni),f=(0,o.useContext)(r.Xo),C=(0,o.useContext)(c.pB),N=(0,a.useRouter)();(0,o.useEffect)(()=>{!m&&p&&t!==u.zD.setPassCode&&v()},[m]),(0,o.useEffect)(()=>{if(s!==u.zD.firstView){let e=h.n2.contactCookie;(null==e?void 0:e.length)?i(e):N.push("/login")}},[s]),(0,o.useEffect)(()=>{if(C!==g.OG.WebView)return f({showFooter:!1,showCopyRight:!0}),()=>{f({showFooter:!0,showCopyRight:!0})}},[C]);let w=(0,o.useMemo)(()=>s!==u.zD.codePage?O[s]:t===u.zD.setPassCode?O[t]:O[u.zD.codePage],[s,t]);return(0,l.jsxs)("div",{className:"".concat(P().container," ").concat(_===g.Q2.dark?P().dark:""),children:[(0,l.jsx)("div",{className:P().slide,children:(0,l.jsx)(x.Z,{})}),(0,l.jsx)("div",{className:P().loginForm,children:(0,l.jsx)(w,{})}),(null==n?void 0:n.isOpen)&&(0,l.jsx)(j.Z,{...n})]})}}}]);